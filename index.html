<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="None" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Kubernetes Documentation</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Introduction to Kubernetes";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Kubernetes Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href=".">Introduction to Kubernetes</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#kubernetes-overview">Kubernetes Overview</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#using-kubernetes">Using Kubernetes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#kubernetes-for-operations">Kubernetes for Operations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#kubernetes-feature-highlights">Kubernetes Feature Highlights</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#deploying-kubernetes">Deploying Kubernetes</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#single-node-kubernetes-clusters">Single-Node Kubernetes Clusters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#single-node-kubernets-clusters-for-continuous-integration">Single-Node Kubernets Clusters for Continuous Integration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#multi-node-kubernetes-clusters">Multi-Node Kubernetes Clusters</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#kubernetes-architecture">Kubernetes Architecture</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#scheduling">Scheduling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#kubernetes-pods">Kubernetes Pods</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#kubernetes-services">Kubernetes services</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#kubernetes-deployments">Kubernetes Deployments</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#interacting-with-kubernetes">Interacting with Kubernetes</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-kubectl-commands">Example Kubectl commands</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pods">Pods</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#whats-in-a-pod-declaration">What's in a Pod Declaration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#manifest-files">Manifest Files</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#manifests-in-action">Manifests in Action</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#services">Services</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-manifest">Example Manifest</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#multi-container-pods">Multi-Container Pods</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#kubernetes-namespaces">Kubernetes Namespaces</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#service-discovery">Service Discovery</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#service-discovery-meachnisms">Service Discovery Meachnisms</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#deployments">Deployments</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#autoscaling">Autoscaling</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#metrics">Metrics</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Kubernetes Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Introduction to Kubernetes</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="introduction-to-kubernetes">Introduction to Kubernetes</h1>
<h2 id="kubernetes-overview">Kubernetes Overview</h2>
<p>Open-source conainer orchestration tool designed to automate deploying, scaling, and operating containerized applications.</p>
<ul>
<li>Kubernetes is a distriubted system. Multiple machines (physical or virtual) maybe used to build a cluster. </li>
<li>Kubernetes places containers on machine based on schedules and availability.</li>
<li>Kubernetes can move containers as machines are added/removed.</li>
<li>Can use different container runtimes. It is container runtime agnostic.</li>
<li>Modular, extensive design.</li>
</ul>
<h4 id="using-kubernetes">Using Kubernetes</h4>
<ul>
<li>Declarative Configuration</li>
<li>Deploy Containers fast</li>
<li>Configure networking</li>
<li>Scale and Expose services</li>
</ul>
<h4 id="kubernetes-for-operations">Kubernetes for Operations</h4>
<p>Kubernetes offers multiple features for Operations people.</p>
<ul>
<li>Automatically recover failed machines</li>
<li>Built-in Support for Machine Maintenance</li>
<li>Join Clusters with Federation</li>
</ul>
<h4 id="kubernetes-feature-highlights">Kubernetes Feature Highlights</h4>
<ul>
<li>Automated deployment rollout and rollback</li>
<li>Seamless horizontal scaling</li>
<li>Secrets Management</li>
<li>Service discovery and load balancing</li>
<li>Simple log collection</li>
<li>Stateful application support</li>
<li>Persistent volume management</li>
</ul>
<p><strong>AWS's alternative of Kubernets:</strong> Amazon ECS (Elastic Container Service). This can be managed by your EC2 or by AWS Fargate.</p>
<h2 id="deploying-kubernetes">Deploying Kubernetes</h2>
<h4 id="single-node-kubernetes-clusters">Single-Node Kubernetes Clusters</h4>
<p>Some options to deploy Kubernetes is - </p>
<ul>
<li>Docker (includes a port for running single-node docker clusters)</li>
<li>Minikube </li>
<li>Kubeadm (only for Linux machines, will start kubernetes on the host machine, instead of a virtual machine like the prior two methods)</li>
</ul>
<h4 id="single-node-kubernets-clusters-for-continuous-integration">Single-Node Kubernets Clusters for Continuous Integration</h4>
<ul>
<li>Create ephemeral clusters that start quickly and are in a clean state.</li>
<li>Kubernetes-in-Docker (KinD) is made for this case.</li>
</ul>
<h4 id="multi-node-kubernetes-clusters">Multi-Node Kubernetes Clusters</h4>
<ul>
<li>For production workloads</li>
<li>Horizontal scaling</li>
<li>Tolerate Node Failures</li>
</ul>
<h2 id="kubernetes-architecture">Kubernetes Architecture</h2>
<ul>
<li>The top of the Kubernetes architecture is a <strong>Cluster</strong>. Cluster referes to all of the machines collectively and can be thought of as the entire running system.</li>
<li>Nodes are the machines in the cluster. Nodes can be categorized as <strong>workers</strong> or <strong>masters</strong>.</li>
<li>Worker nodes include software to run containers managed by the Kubernetes control plane.</li>
<li>Master nodes run the control plane.</li>
<li>The control plane is a set of APIs and software that Kubernetes users interact with. The APIs and software are referred to as master components.</li>
</ul>
<h4 id="scheduling">Scheduling</h4>
<p>Control plane schedules containers onto nodes. Scheduling decisions consider required CPU and other factors. Scheduling here refers to the decision process of placing containers onto node.</p>
<h4 id="kubernetes-pods">Kubernetes Pods</h4>
<ul>
<li>Pods are group of Containers. Pods may include one or more containers. All containers in a pod run on the same node. </li>
<li>Pods are the smallest building block of Kubernetes.</li>
<li>More complex and useful abstractions built on top of Pods.</li>
</ul>
<h4 id="kubernetes-services">Kubernetes services</h4>
<ul>
<li>Services define networking rules for exposing groups of Pods - To other pods, To the cluster and To the internet</li>
</ul>
<h4 id="kubernetes-deployments">Kubernetes Deployments</h4>
<ul>
<li>Manage deploying configuration changes to running Pods. They control rollout and rollback of Pods.</li>
<li>Horizontal scaling.</li>
</ul>
<h2 id="interacting-with-kubernetes">Interacting with Kubernetes</h2>
<ul>
<li><strong>The Kubernetes API Server:</strong> Modify cluster state information by sending requests to the Kubernetes API server. The API server is a master componentt that acts as the frontend of the server. It is possible but not common to work directly with the API server.</li>
<li><strong>Client Libraries:</strong> Client libraries can handle the tediousness of working with the REST API for you. It handles authenticating and managing individual REST API requests and responses.</li>
<li><strong>Kubernetes Command-Line Tool (Kubectl):</strong> This is by far the most common tool to interact with Kubernetes. With this, you can issue high-level commands that are translated into REST API calls. You can also acccess clusters that are both local and remote. Kubectl also manages all kinds of resources, and provides debugging and introspection features.</li>
</ul>
<h4 id="example-kubectl-commands">Example Kubectl commands</h4>
<ul>
<li><code>kubectl create</code> to create resources (Pods, Services etc.). We can either specify what we want to create in the commands or in the files. The files are usually in <code>.yaml</code> format and are called manifests.</li>
<li><code>kubectl delete</code> to delete resources</li>
<li><code>kubectl get</code> to get a list of resources of a given type. For example - <code>kubectl get pods</code> gets all the pods in the current namespace</li>
<li><code>kubectl describe</code> to get print a detailed info about a resource(s). For example - <code>kubectl describe &lt;resource-type&gt; &lt;resource-name&gt;</code> </li>
<li><code>kubectl logs</code> to print container logs</li>
</ul>
<h2 id="pods">Pods</h2>
<ul>
<li>Basic building blocks in Kubernetes</li>
<li>Contain one or more containers</li>
<li>Pod containers all share a container network</li>
<li>One IP address per pod</li>
</ul>
<h4 id="whats-in-a-pod-declaration">What's in a Pod Declaration</h4>
<ul>
<li>Container Image</li>
<li>Container Ports</li>
<li>Container Restart Policy</li>
<li>Resource Limits</li>
</ul>
<h4 id="manifest-files">Manifest Files</h4>
<p>All kinds of Pod configurations are written in a manifest file, typicall written in <code>.yaml</code>. Manifests can describe all kinds of resources. </p>
<ul>
<li><code>apiVersion</code> tells kubernetes which api version is going to be used </li>
<li><code>kind</code> tells what kind of resource is going to be used</li>
<li><code>metadata</code> provides relevant information abou the resource. For example - name of the resource</li>
<li><code>spec</code> contains resource specific properties</li>
</ul>
<h4 id="manifests-in-action">Manifests in Action</h4>
<p>Manifests are send to kubernetes api server to take actions on. <code>kubectl create</code> sends manifest to Kubernetes API Server.</p>
<p>API server does the following for Pod manifests -</p>
<ul>
<li>Select a node with sufficient resources</li>
<li>Schedule Pod onto a node</li>
<li>Node pulls Pod's container image</li>
<li>Start Pod's container</li>
</ul>
<h2 id="services">Services</h2>
<ul>
<li>A service defines networking rules for accessing Pods in the cluster and from the internet. You can use labels to select a group of pods.</li>
<li>Service has a fixed IP address.</li>
<li>Distribute requests across Pods in the group.</li>
</ul>
<h4 id="example-manifest">Example Manifest</h4>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
    labels:
        app: webserver
    name: webserver
spec:
    ports:
    - port: 80
    selector:
        app: webserver
    type: NodePort
</code></pre>
<h2 id="multi-container-pods">Multi-Container Pods</h2>
<p>To demonstrate this we are going to take an example - </p>
<ul>
<li>A simple application that increments and prints a count. </li>
<li>The application consists <strong>4 containers split across 3 tiers</strong>. </li>
<li>The Application tier is a Node.js server container. </li>
<li>There is a Data tier that contains a Redis cache. </li>
<li>The Support tier contains the Poller (that polls the server with GET requests) and Counter (that sends POST requests). </li>
<li>All containers configured using the environment variables. </li>
</ul>
<h4 id="kubernetes-namespaces">Kubernetes Namespaces</h4>
<ul>
<li>We can use namespaces to seperate the resources according to users, environments, or applications.</li>
<li>Role-based access control (RBAC) to secure access per Namespace.</li>
<li>Using namespace is the best practice.</li>
</ul>
<p><strong>Example Namespace manifest file</strong> -</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Namespace
metadata:
    name: microservice
    labels:
        app: counter
</code></pre>
<p>Now create Namepace with <code>kubectl create</code> command.</p>
<p><strong>Multi Container Application Manifest</strong></p>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
    name: app
spec:
    containers:
        - name: redis
          image: redis:latest
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 6379

        - name: server
          image: 
          ports:
            - containerPort: 8080
          env:
            - name: REDIS_URL
              value: redis://localhost:6379

        - name: counter
          image:
          env:
            - name: API_URL
              value: http://localhost:8080

        - name: poller
          image:
          env:
            - name: API_URL
              value: http://localhost:8080
</code></pre>
<p>Now if you want to create this <code>multi-container pod</code> with the <code>microservice</code> namespace, run this command -</p>
<pre><code class="language-bash">kubectl create -f &lt;manifest-name&gt; -n &lt;namespace-name&gt;
</code></pre>
<p>If you want to get the pod, type - <code>kubectl get -n &lt;namespace&gt; pod &lt;pod-name&gt;</code></p>
<h2 id="service-discovery">Service Discovery</h2>
<p>We will take the example that we did in the last lesson. But in this case - the tiers are not in the same pod, but the three tiers are split into three different pods. So they need to communicate. This is where Service comes in.</p>
<p><strong>Why Services?</strong></p>
<ul>
<li>Supports multi-Pod design</li>
<li>Provides static endpoint for each tier</li>
<li>Handles Pod IP changes</li>
<li>They also have Load Balancing. They also distribute loads in the group of pods.</li>
</ul>
<p>To handle this we need to have App tier service in front of the Server tier and Data tier service infront of the Redis tier.</p>
<p>With YAML you can delcare multiple resources in a single manifest by seperating the resources by <code>---</code>. Just like -</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
    name: data-tier
    labels:
        app: microservices
spec:
    ports:
    - port: 6379
      protocol: TCP
      name: redis
    selector:
      tier: data
    type:
---
apiVersion: v1
kind: Pod
metadata:
    name: data-tier
    labels:
        app: microservices
        tier: data
spec:
    containers:
        -  name: redis
           ports:
               - containerPort: 6379

</code></pre>
<p>If you want to create a service for a specific tier, you can do - </p>
<pre><code class="language-bash">kubectl describe service -n &lt;service&gt; &lt;tier name&gt;
</code></pre>
<h4 id="service-discovery-meachnisms">Service Discovery Meachnisms</h4>
<ul>
<li>Environment Variables<ul>
<li>Services address automatically injected in containers</li>
<li>Environment variables follow naming conventions based on service name</li>
</ul>
</li>
<li>DNS <ul>
<li>DNS records automatically created in cluster's DNS</li>
<li>Containers automatically configured to query cluster DNS</li>
</ul>
</li>
</ul>
<p>So in conclusion -</p>
<ul>
<li>Environment variables and DNS allow Pods to discover Services</li>
<li>Environment variables for Services available at Pod creation time and in the same Namespace</li>
<li>DNS dynamically updated and accross Namespaces.</li>
</ul>
<h2 id="deployments">Deployments</h2>
<ul>
<li>Represent multiple replicas of a Pod. Pods in deployment are identical and you can create Pods using the manifest. If a replica is deleted, Kubernetes will automatically create a replica for you</li>
<li>Describe a desired state the Kubernetes needs to achieve</li>
<li>Deployment Controller master component converges actual state to the desired state</li>
<li>Services seamlessly support scaling. Scaling is best with stateless Pods because they support horizontal scaling. This is possible becaues the state of the app is stored in the Data tier.</li>
</ul>
<p>To get deployments- <code>kubectl get -n &lt;namsepace&gt; deployments</code></p>
<p>If we want to scale up certain tiers, we can use the <code>scale</code> command. Here is how we can do this -</p>
<pre><code class="language-bash">kubectl scale -n &lt;namespace&gt; deployments &lt;tier-name&gt; --replicas=&lt;number-of-replicas&gt;
</code></pre>
<h2 id="autoscaling">Autoscaling</h2>
<ul>
<li>Scale automatically based on CPU utilization (or custom metrics)</li>
<li>Set target CPU along with minimum and max replicas</li>
<li>Target CPU is expressed as a percentage of the Pod's CPU request.</li>
</ul>
<h4 id="metrics">Metrics</h4>
<ul>
<li>Autoscaling depends on metrics being collected</li>
<li>Metrics Server is one solution for collecting metrics</li>
<li>Several manifest files are used to deploy Metrics server</li>
</ul>
<p>Autoscaling will need the metrics server to run and collect the metrics. And then autoscaler will increaes or decrease replicas based on the metircs and communicate with the Metrics API.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>

<!--
MkDocs version : 1.5.3
Build Date UTC : 2024-12-05 07:01:53.182673+00:00
-->
